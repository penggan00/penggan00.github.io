<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>peng gan Blog</title><link href=styles.css rel=stylesheet><div class=header><a href=../../index.html>My Blog</a></div><div class=container><div class=subheader><h1>sing-box</h1></div><div class=date id=lastModified></div><div class=content><p><p>说起网络代理工具大家第一时间想到的应该是v2ray和clash，最近又有另一个非常火的网络代理工具出现了，sing-box，和v2ray属于同一种类型的工具，但是sing-box对协议支持的丰富程度可以说无人能及，本期教程就来带大家简单上手sing-box，使用sing-box搭建一个非常骚的shadowtls节点<h2>视频教程</h2><a href=https://www.youtube.com/embed/o-IFEu4GENE target=_blank>https://www.youtube.com/embed/o-IFEu4GENE</a></div><hr><h2>安装sing-box</h2>官方文档：<a href=https://sing-box.sagernet.org target=_blank>https://sing-box.sagernet.org</a><br>下载sing-box：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>wget https://github.com/SagerNet/sing-box/releases/download/v1.0.4/sing-box_1.0.4_linux_amd64.deb</code></pre><p>最新版请在项目官方地址获取：<a href=https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL1NhZ2VyTmV0L3NpbmctYm94L3JlbGVhc2VzL2xhdGVzdA target=_blank>https://github.com/SagerNet/sing-box/releases/latest</a><p>安装sing-box：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>dpkg -i sing-box_1.0.4_linux_amd64.deb</code></pre><p>查看安装包内容：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>dpkg -c sing-box_1.0.4_linux_amd64.deb</code></pre><p>修改配置文件：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>vim /etc/sing-box/config.json</code></pre><p>查看sing-box状态：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>systemctl status sing-box.service</code></pre><p>启动sing-box：<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>systemctl start sing-box.service</code></pre></p>sing-box服务端shadowtls配置<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>{
  "inbounds": [
  {
  "type": "shadowtls",
  "listen_port": 443,
  "handshake": {
    "server": "www.bing.com",
    "server_port": 443 
  },
  "detour": "shadowsocks-in"
  },
  {
  "type": "shadowsocks",
  "tag": "shadowsocks-in",
  "listen": "127.0.0.1",
  "method": "2022-blake3-aes-128-gcm",
  "password": "8JCsPssfgS8tiRwiMlhARg=="
  }
  ]
  }</code></pre>sing-box客户端shadowtls配置socks/http代理模式<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>{
  "inbounds": [
  {
  "type": "mixed",
  "listen_port": 1080,
  "sniff": true,
  "set_system_proxy": true
  }
  ],
  "outbounds": [
  {
  "type": "shadowsocks",
  "method": "2022-blake3-aes-128-gcm",
  "password": "8JCsPssfgS8tiRwiMlhARg==",
  "detour": "shadowtls-out",
  "multiplex": {
    "enabled": true,
    "max_connections": 4,
    "min_streams": 4
  }
  },
  {
  "type": "shadowtls",
  "tag": "shadowtls-out",
  "server": "填写服务器ip地址",
  "server_port": 443,
  "tls": {
    "enabled": true,
    "server_name": "www.bing.com"
  }
  },
  {
  "type": "direct",
  "tag": "direct"
  },
  {
  "type": "block",
  "tag": "block"
  }
  ],
  "route": {
  "rules": [
  {
    "geosite": "category-ads-all",
    "outbound": "block"
  },
  {
    "geosite": "cn",
    "geoip": "cn",
    "outbound": "direct"
  }
  ]
  }
  }
  </code></pre>TUN模式<pre><button class=copy-button onclick=copyToClipboard(this)>复制</button><code>{
  "dns": {
  "servers": [
  {
    "tag": "google",
    "address": "tls://8.8.8.8"
  },
  {
    "tag": "local",
    "address": "223.5.5.5",
    "detour": "direct"
  }
  ],
  "rules": [
  {
    "geosite": "cn",
    "server": "local"
  }
  ],
  "strategy": "ipv4_only"
  },
  "inbounds": [
  {
  "type": "tun",
  "inet4_address": "172.19.0.1/30",
  "auto_route": true,
  "sniff": true
  }
  ],
  "outbounds": [
  {
  "type": "shadowsocks",
  "method": "2022-blake3-aes-128-gcm",
  "password": "8JCsPssfgS8tiRwiMlhARg==",
  "detour": "shadowtls-out",
  "multiplex": {
    "enabled": true,
    "max_connections": 4,
    "min_streams": 4
  }
  },
  {
  "type": "shadowtls",
  "tag": "shadowtls-out",
  "server": "填写服务器ip地址",
  "server_port": 443,
  "tls": {
    "enabled": true,
    "server_name": "www.bing.com"
  }
  },
  {
  "type": "direct",
  "tag": "direct"
  },
  {
  "type": "block",
  "tag": "block"
  },
  {
  "type": "dns",
  "tag": "dns-out"
  }
  ],
  "route": {
  "rules": [
  {
    "protocol": "dns",
    "outbound": "dns-out"
  },
  {
    "geosite": "category-ads-all",
    "outbound": "block"
  },
  {
    "geosite": "cn",
    "geoip": "cn",
    "outbound": "direct"
  }
  ],
  "auto_detect_interface": true
  }
  }
  </code></pre></div><script src=script.js></script><footer><a href=https://t.me/g9999_bot/ target=_blank>© 2024 peng gan. All rights reserved.</a></footer>
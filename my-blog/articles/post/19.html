<!DOCTYPE html> <!-- 声明文档类型 -->
<html lang="en"> <!-- 设置文档语言为英语 -->
<head>
    <meta charset="UTF-8"> <!-- 设置文档字符编码为UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 设置视口，以确保页面在移动设备上正确显示 -->
    <title>peng gan Blog</title>  <!-- 设置页面标题 -->
    <link rel="stylesheet" href="styles.css"> <!-- 引入外部CSS文件 -->
</head>
<body>
<div class="header"> <!-- 定义一个类为header的div -->
            <a href="../../index.html">My Blog</a> <!-- 链接内容 -->
        </div>
    <div class="container"> <!-- 定义一个类为container的div -->
        
        <div class="subheader"> <!-- 定义一个类为subheader的div -->
                <h1> 办公-NAS All in one</h1> <!-- 文章主题 -->
              </div>
              <div class="date" id="lastModified"></div> <!-- 定义一个类为date的div，显示日期与时间 -->
              <div class="content"> <!-- 定义一个类为content的div -->
             <div class="copy-container">
            <!-- 文章内容 -->
          
    
            <p style=""><a href="https://www.bilibili.com/video/BV1zu4y1g7LY">视频解说</a></p>
       
               <p>  一键部署NAS软件的脚本↓</mark></p><p style=""><a href="https://github.com/wukongdaily/diy-nas-onescript">https://github.com/wukongdaily/diy-nas-onescript</a></p><h2 style="" id="1%E3%80%81%E5%AE%89%E8%A3%85%E5%BF%85%E5%A4%87%E7%9A%84%E5%8A%9E%E5%85%AC%E5%92%8C%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%BD%AF%E4%BB%B6">1、安装必备的办公和远程控制软件</h2><p style="">WPS、QQ、微信、VScode、远程桌面RustDesk</p><h2 style="" id="2%E3%80%81%E5%90%AF%E7%94%A8ssh-%E6%9C%8D%E5%8A%A1">2、启用SSH 服务</h2><p style="">sudo apt-get install openssh-server</p><h2 style="" id="3%E3%80%81%E5%AE%89%E8%A3%85%E8%99%9A%E6%8B%9F%E6%9C%BA">3、安装虚拟机</h2><p style="">下载run格式的virtualbox 7</p><p style=""><a href="https://www.virtualbox.org/wiki/Linux_Downloads">https://www.virtualbox.org/wiki/Linux_Downloads</a></p><p style="">其中，点击 <strong><span fontsize="" color="rgb(153, 27, 27)" style="color: rgb(153, 27, 27)">【​All distributions】</span></strong></p><p style="">或者使用命令行下载和执行</p><p style=""># 下载虚拟机安装包run，<a href="http://并保存为virtualbox7.run">并保存为 </a><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>virtualbox7.run</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code></code>wget -O virtualbox7.run https://download.virtualbox.org/virtualbox/7.0.12/VirtualBox-7.0.12-159484-Linux_amd64.run</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sh virtualbox7.run</code></pre></pre></code></pre></p><p style="">利用virtualbox自带的命令行将img 转换为vdi 方便导入虚拟机virtualbox7</p><h2 style="" id="%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%EF%BC%8C%E8%B6%85%E7%BA%A7%E5%BF%AB%EF%BC%8C%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%90%9E%E5%AE%9A"> 格式转换，超级快，一行代码搞定</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>VBoxManage convertfromraw /path/to/source.img /path/to/target.vdi --format VDI</code></pre></p><p style=""><strong>转换之后的vdi 要赋予最高权限 777 这样才可以确保VirtualBox 虚拟机调用</strong></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo chmod 777 /path/to/target.vdi</code></pre></p><h2 style="" id="%E5%A6%82%E4%BD%95%E5%8D%B8%E8%BD%BDvirtualbox-7-%E8%99%9A%E6%8B%9F%E6%9C%BA">如何卸载VirtualBox 7 虚拟机</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sh /opt/VirtualBox/uninstall.sh</code></pre></p><h2 style="" id="%E5%AE%89%E8%A3%85%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%89%A9%E5%B1%95%E5%8C%85%EF%BC%88usb%E8%AE%BE%E5%A4%87%EF%BC%89">安装虚拟机扩展包（USB设备）</h2><p style="">如何用命令行安装VirtualBox 7 扩展包（识别USB设备）</p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://download.virtualbox.org/virtualbox/7.0.12/Oracle_VM_VirtualBox_Extension_Pack-7.0.12.vbox-extpack</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>echo "y" | sudo VBoxManage extpack install --replace Oracle_VM_VirtualBox_Extension_Pack-7.0.12.vbox-extpack</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo VBoxManage list extpacks</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo groupadd usbfs</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo adduser $USER vboxusers</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo adduser $USER usbfs</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>echo "VM 扩展包安装完成,重启后才能生效。重启后USB才可以被虚拟机识别"</code></pre></p><h2 style="" id="4%E3%80%81%E5%AE%89%E8%A3%85casaos%EF%BC%88-docker%EF%BC%89">4、安装CasaOS（ Docker）</h2><p style="">准备工作：补全 udevil 和 mergerfs</p><h2 style="" id="%E5%AE%89%E8%A3%85%E6%B7%B1%E5%BA%A6deepin%E7%BC%BA%E5%B0%91%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85udevil">安装深度deepin缺少的依赖包udevil</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://mirrors-i.tuna.tsinghua.edu.cn/debian/pool/main/u/udevil/udevil_0.4.4-3_amd64.deb</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo dpkg -i udevil_0.4.4-3_amd64.deb</code></pre></p><h2 style="" id="%E5%AE%89%E8%A3%85%E6%B7%B1%E5%BA%A6deepin%E7%BC%BA%E5%B0%91%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85mergerfs">安装深度deepin缺少的依赖包mergerfs</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://mirrors.sohu.com/deepin/pool/main/m/mergerfs/mergerfs_2.24.2-4_amd64.deb</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo dpkg -i mergerfs_2.24.2-4_amd64.deb</code></pre></p><blockquote><p style="">一般在深度deepin系统下是无法使用CasaOS的会报错</p></blockquote><blockquote><p style="">准备工作：</p><p style="">由于CasaOS暂时没有适配深度deepin v23系统,但适配了标准的Debian 12。</p><p style="">而深度deepin系统恰好是基于debian 12制作的，嘿，那就先伪装一下debian 12/bookworm</p><p style="">从而让CasaOS的脚本顺利通过。</p></blockquote><p style="">暂时修改一下/etc/os-release 中的ID和VERSION_CODENAME</p><h4 style="" id="%E5%A4%87%E4%BB%BD%E4%B8%80%E4%B8%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><mark data-color="inherit" style="background-color: inherit; color: inherit; background-color: inherit; color: inherit; background-color: inherit; color: inherit; color: rgb(211, 61, 61); background-color: inherit;">备份一下配置文件</mark></h4><h2 style="" id="%E5%A4%87%E4%BB%BD%E4%B8%80%E4%B8%8B%E5%8E%9F%E5%A7%8B%E6%96%87%E4%BB%B6"> 备份一下原始文件</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo cp /etc/os-release /etc/os-release.backup</code></pre></p><h4 style="" id="%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E5%90%8D%E7%A7%B0%E5%92%8C%E4%BB%A3%E5%8F%B7%EF%BC%8C%E5%BE%85casaos%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E8%BF%98%E5%8E%9F%E5%9B%9E%E6%9D%A5%E3%80%82">修改系统名称和代号，待CasaOS安装成功后，还原回来。</h4><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo sed -i -e 's/^ID=.*$/ID=debian/' -e 's/^VERSION_CODENAME=.*$/VERSION_CODENAME=bookworm/' /etc/os-release</code></pre></p><p style=""><img src="/upload/modify.png" width="100%" height="100%" style="display: inline-block"></p><blockquote><p style="">安装CasaOS需要的文件位于github，因此建议挂代理访问来加速下载过程。</p><p style=""># 在深度deepin v23（debian 12） 系统下安装CasaOS</p></blockquote><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget -qO- https://get.casaos.io | sudo bashbase</code></pre></p><p style=""></p><h2 style="" id="%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%90%8E%2C%E8%AE%B0%E5%BE%97%E5%B0%86%E7%B3%BB%E7%BB%9F%E5%90%8D%E7%A7%B0%E8%BF%98%E5%8E%9F%E5%9B%9E%E6%9D%A5"><mark data-color="inherit" style="background-color: inherit; color: inherit; background-color: inherit; color: inherit; background-color: inherit; color: inherit; color: rgb(211, 61, 61); background-color: inherit;">安装成功后,记得将系统名称还原回来</mark></h2><h2 style="" id="casaos%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%2C%E8%A6%81%E8%AE%B0%E5%BE%97%E8%BF%98%E5%8E%9F%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"> CasaOS安装成功之后,要记得还原配置文件</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo mv /etc/os-release.backup /etc/os-release</code></pre></p><p style=""></p><h2 style="" id="%E5%A6%82%E4%BD%95%E5%8D%B8%E8%BD%BD-casaos">如何卸载 CasaOS</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>casaos-uninstall</code></pre></p><h2 style="" id="%E9%85%8D%E7%BD%AEdocker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F">配置docker国内镜像</h2><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo mkdir -p /etc/docker</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>{</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "registry-mirrors": [</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>"https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com",</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://ypzju6vq.mirror.aliyuncs.com",</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://registry.docker-cn.com",</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "http://hub-mirror.c.163.com",</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://docker.mirrors.ustc.edu.cn"</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> ]</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>}</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>EOF</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo systemctl daemon-reload</code></pre></p><p style=""><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo systemctl restart docker</code></pre></p><p style=""></p><p style=""></p>
                
                
              </div>

        </div>
    </div>
    <script src="script.js"></script> <!-- 引用外部JavaScript文件 -->
    <footer>
        <a href="https://t.me/g9999_bot/" target="_blank">&copy; 2024 peng gan. All rights reserved.</a>    
                </footer>
</body>
</html>

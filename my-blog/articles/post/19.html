<!DOCTYPE html> <!-- 声明文档类型 -->
<html lang="en"> <!-- 设置文档语言为英语 -->
<head>
    <meta charset="UTF-8"> <!-- 设置文档字符编码为UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 设置视口，以确保页面在移动设备上正确显示 -->
    <title>peng gan Blog</title>  <!-- 设置页面标题 -->
    <link rel="stylesheet" href="styles.css"> <!-- 引入外部CSS文件 -->
</head>
<body>
<div class="header"> <!-- 定义一个类为header的div -->
            <a href="../../index.html">My Blog</a> <!-- 链接内容 -->
        </div>
    <div class="container"> <!-- 定义一个类为container的div -->
        
        <div class="subheader"> <!-- 定义一个类为subheader的div -->
                <h1> 办公-NAS All in one</h1> <!-- 文章主题 -->
              </div>
              <div class="date" id="lastModified"></div> <!-- 定义一个类为date的div，显示日期与时间 -->
              <div class="content"> <!-- 定义一个类为content的div -->
             <div class="copy-container">
            <!-- 文章内容 -->
          
    
            <p><a href="https://www.bilibili.com/video/BV1zu4y1g7LY">视频解说</a></p>
       
               <p>  一键部署NAS软件的脚本↓</mark></p><p><a href="https://github.com/wukongdaily/diy-nas-onescript">https://github.com/wukongdaily/diy-nas-onescript</a></p><h2>1、安装必备的办公和远程控制软件</h2><p>WPS、QQ、微信、VScode、远程桌面RustDesk</p><h2>sudo apt-get install openssh-server</p><h2>3、安装虚拟机</h2><p>下载run格式的virtualbox 7</p><p><a href="https://www.virtualbox.org/wiki/Linux_Downloads">https://www.virtualbox.org/wiki/Linux_Downloads</a></p><p>其中，点击 <strong><span fontsize="" color="rgb(153, 27, 27)" style="color: rgb(153, 27, 27)">【​All distributions】</span></strong></p><p>或者使用命令行下载和执行</p><p># 下载虚拟机安装包run，<a href="http://并保存为virtualbox7.run">并保存为 </a><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>virtualbox7.run</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget -O virtualbox7.run https://download.virtualbox.org/virtualbox/7.0.12/VirtualBox-7.0.12-159484-Linux_amd64.run</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sh virtualbox7.run</code></pre></pre></code></pre></p><p>利用virtualbox自带的命令行将img 转换为vdi 方便导入虚拟机virtualbox7</p><h2> 格式转换，超级快，一行代码搞定</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>VBoxManage convertfromraw /path/to/source.img /path/to/target.vdi --format VDI</code></pre></p><p><strong>转换之后的vdi 要赋予最高权限 777 这样才可以确保VirtualBox 虚拟机调用</strong></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo chmod 777 /path/to/target.vdi</code></pre></p><h2>如何卸载VirtualBox 7 虚拟机</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sh /opt/VirtualBox/uninstall.sh</code></pre></p><h2>安装虚拟机扩展包（USB设备）</h2><p>如何用命令行安装VirtualBox 7 扩展包（识别USB设备）</p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://download.virtualbox.org/virtualbox/7.0.12/Oracle_VM_VirtualBox_Extension_Pack-7.0.12.vbox-extpack</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>echo "y" | sudo VBoxManage extpack install --replace Oracle_VM_VirtualBox_Extension_Pack-7.0.12.vbox-extpack</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo VBoxManage list extpacks</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo groupadd usbfs</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo adduser $USER vboxusers</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo adduser $USER usbfs</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>echo "VM 扩展包安装完成,重启后才能生效。重启后USB才可以被虚拟机识别"</code></pre></p><h2>4、安装CasaOS（ Docker）</h2><p>准备工作：补全 udevil 和 mergerfs</p><h2>安装深度deepin缺少的依赖包udevil</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://mirrors-i.tuna.tsinghua.edu.cn/debian/pool/main/u/udevil/udevil_0.4.4-3_amd64.deb</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo dpkg -i udevil_0.4.4-3_amd64.deb</code></pre></p><h2>安装深度deepin缺少的依赖包mergerfs</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget https://mirrors.sohu.com/deepin/pool/main/m/mergerfs/mergerfs_2.24.2-4_amd64.deb</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo dpkg -i mergerfs_2.24.2-4_amd64.deb</code></pre></p><blockquote><p>一般在深度deepin系统下是无法使用CasaOS的会报错</p></blockquote><blockquote><p>准备工作：</p><p>由于CasaOS暂时没有适配深度deepin v23系统,但适配了标准的Debian 12。</p><p>而深度deepin系统恰好是基于debian 12制作的，嘿，那就先伪装一下debian 12/bookworm</p><p>从而让CasaOS的脚本顺利通过。</p></blockquote><p>暂时修改一下/etc/os-release 中的ID和VERSION_CODENAME</p><h4><mark data-color="inherit" style="background-color: inherit; color: inherit; background-color: inherit; color: inherit; background-color: inherit; color: inherit; color: rgb(211, 61, 61); background-color: inherit;">备份一下配置文件</mark></h4><h2> 备份一下原始文件</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo cp /etc/os-release /etc/os-release.backup</code></pre></p><h4>修改系统名称和代号，待CasaOS安装成功后，还原回来。</h4><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo sed -i -e 's/^ID=.*$/ID=debian/' -e 's/^VERSION_CODENAME=.*$/VERSION_CODENAME=bookworm/' /etc/os-release</code></pre></p><p><img src="/upload/modify.png" width="100%" height="100%" style="display: inline-block"></p><blockquote><p>安装CasaOS需要的文件位于github，因此建议挂代理访问来加速下载过程。</p><p># 在深度deepin v23（debian 12） 系统下安装CasaOS</p></blockquote><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>wget -qO- https://get.casaos.io | sudo bashbase</code></pre></p><p></p><h2><mark data-color="inherit" style="background-color: inherit; color: inherit; background-color: inherit; color: inherit; background-color: inherit; color: inherit; color: rgb(211, 61, 61); background-color: inherit;">安装成功后,记得将系统名称还原回来</mark></h2><h2> CasaOS安装成功之后,要记得还原配置文件</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo mv /etc/os-release.backup /etc/os-release</code></pre></p><p></p><h2>如何卸载 CasaOS</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>casaos-uninstall</code></pre></p><h2>配置docker国内镜像</h2><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo mkdir -p /etc/docker</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>{</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "registry-mirrors": [</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>"https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com",</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://ypzju6vq.mirror.aliyuncs.com",</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://registry.docker-cn.com",</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "http://hub-mirror.c.163.com",</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> "https://docker.mirrors.ustc.edu.cn"</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code> ]</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>}</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>EOF</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo systemctl daemon-reload</code></pre></p><p><pre><button class="copy-button" onclick="copyToClipboard(this)">复制</button><code>sudo systemctl restart docker</code></pre></p><p></p><p></p>
                
                
              </div>

        </div>
    </div>
    <script src="script.js"></script> <!-- 引用外部JavaScript文件 -->
    <footer>
        <a href="https://t.me/g9999_bot/" target="_blank">&copy; 2024 peng gan. All rights reserved.</a>    
                </footer>
</body>
</html>

<!DOCTYPE html> 
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>peng gan Blog</title>  
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
<div class="header"> 
            <a href="../../index.html">My Blog</a> 
        </div>
    <div class="container"> 
        
        <div class="subheader"> 
            <h1>     windows系统充当软路由     </h1> 
        </div>
        <div class="date" id="lastModified"></div> 
        <div class="content">  <!-- 文章内容 --><p>

       <h2>视频教程</h2></iframe></div><p>youtube播放地址：<a href="https://bulianglin.com/g/aHR0cHM6Ly95b3V0dS5iZS9kcG1ua0toQkZ0Yw" target="_blank" >https://youtu.be/dpmnkKhBFtc</a></p><h2>视频相关链接</h2><p>RouteForwarder：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL2J1bGlhbmdsaW4vZGVtbw" target="_blank" >https://github.com/bulianglin/demo</a><br>clash for windows：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL0ZuZHJvaWQvY2xhc2hfZm9yX3dpbmRvd3NfcGtnL3JlbGVhc2VzL2xhdGVzdA" target="_blank" >https://github.com/Fndroid/clash_for_windows_pkg/releases/latest</a><br>v2rayN：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tLzJkdXN0L3YycmF5Ti9yZWxlYXNlcy90YWcvNi4yMQ" target="_blank" >https://github.com/2dust/v2rayN/releases/tag/6.21</a><br>SSTap：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL2dpdGhlbGxvMTIzL3NzdGFw" target="_blank" >https://github.com/githello123/sstap</a></p><h2>视频文稿（忽略）</h2><p>你是否有过这样一个问题<br>海淘的电子产品<br>需要在科学上网环境中联网激活<br>而你手上只有一台能科学上网的windows电脑<br>该怎么利用它进行激活<br>本期就来教大家<br>把windows电脑配置成旁路由<br>实现全家科学上网<br>只要你的电脑能科学上网<br>你家里的手机 电视盒子<br>游戏机等网络设备<br>无需运行任何代理工具<br>即可自带科学上网<br>在局域网共享VPN那期视频中<br>我给大家详细的介绍了目前<br>已知的所有共享模式<br>代理共享模式 网关共享模式<br>路由共享模式<br>以及这三种共享模式各自的优缺点和实现方法<br>没看过的强烈建议先看一下<br>比较遗憾的是<br>windows系统无法实现网关共享<br>要实现的话只能通过安装Linux虚拟机实现<br>虽说比较鸡肋但也并不一无是处<br>正如我们刚开头讲的<br>你的电子设备需要科学上网环境才能激活<br>比如mate的VR设备quest2<br>还有一些海外版的手机<br>但你手上只有一台<br>单网口的windows电脑<br>这种情况就需要通过Linux虚拟机实现网关共享了<br>而今天我们介绍的方法<br>不需要安装Linux虚拟机<br>直接使用你的windows系统实现网关节的共享<br>将上次的遗憾补上<br>有些朋友可能有疑问<br>windows电脑的clash或者v2rayN<br>不是都有共享局域网的功能吗<br>共享局域网属于代理共享<br>我们这里说的是网关共享<br>类似于旁路由<br>关于他们具体有什么区别的话<br>建议回看局域网共享VPN那期视频<br>有非常详细的解释<br>这里就不浪费大家的时间了<br>直接开始今天的视频教程<br>为了方便我使用windows虚拟机演示<br>大家可以直接使用<br>实体机的windows系统操作<br>虽然这可能是一个比较小众的需求<br>考虑到手动配置比较麻烦<br>我还是花时间做了这个小工具<br>主要是协助我们进行路由配置<br>尽量降低大家的操作难度<br>而且软件还有非常精美的UI界面<br>在此跟大家要个小小的赞应该不过分吧<br>软件下载地址<br>我会放在视频下方的说明栏<br>打开后默认会检测你的物理网卡以及网关<br>如果你的电脑有多张网卡<br>需要在网卡接口选择正确的网卡<br>我的局网默认网关是192.168.0.1<br>先跟着视频演示<br>找到网卡的IP设置页面<br>将电脑的IP固定下来<br>随便设置一个同网段的IP<br>比如192.168.0.140<br>记住这个ip地址后面要用<br>子网掩码按默认  默认网关填写<br>192.168.0.1<br>DNS也设置为默认网关<br>修改后点击确认进行保存<br>然后开启路由转发<br>此时提示我们需要重启电脑<br>点击是进行重启<br>如果你没有弹出这个提示<br>就不需要重启<br>重新打开路由转发工具<br>确认路由转发已经开启<br>也可以在命令行中输入ipconfig /all<br>IP路由已启用这里显示是<br>说明已经成功开启了路由转发<br>第一步就算是完成了<br>接着运行代理工具<br>先以clash为例<br>点击右键<br>以管理员权限运行<br>进入TUN设置<br>我这个是clash的默认设置<br>有3个DNS服务器<br>你需要将这些DNS服务器<br>填入软件中的额外路由条目<br>软件默认已经填入了<br>可以不用管<br>如果你设置了fallback DNS<br>也需要填入到额外路由条目中<br>你也可以将这些DNS删除<br>直接填入你家的默认网关<br>因为路由器一般也充当了DNS服务器<br>这个IP是局域网的IP<br>所以不需要填入到额外路由中<br>点击保存<br>还没完 你需要将你所有的节点IP<br>填入到额外路由<br>打开你的配置文件进行编辑<br>复制节点服务器的地址<br>不管是域名还是ip地址<br>都可以将其填入额外路由<br>机场一般都有很多节点<br>但是中转机场很多节点都是同样的域名或者IP<br>重复的只需要填入一个即可<br>如果是直连机场<br>每个节点的IP都不一样<br>所以需要全部填入<br>填完之后<br>确保路由动作是添加路由<br>然后点击执行<br>提示成功<br>这样配置就算是完成了<br>跟着步骤一步一步操作也不是很麻烦<br>最后打开它的模式<br>此时这台windows<br>电脑就已经成为了一台旁路网关了<br>电脑可以正常科学上网<br>查询IP为香港的节点<br>接下来将局域网其他设备的网关<br>改成这台电脑的IP<br>有两种修改方式<br>第一种是通过手动修改<br>单台设备的网关IP<br>先以windows为例<br>跟着视频演示找到配置<br>IP的地方 随便设置一个同网段的IP<br>子网掩码按默认<br>默认网关填写<br>192.168.0.1<br>也就是我们开启了路由转发的windows电脑IP <br>DNS随便填写一个公网ip地址<br>比如1.1.1.1<br>clash默认会进行DNS劫持<br>点击确定进行保存<br>就算是配置好了<br>接着演示Linux的kali系统配置方式<br>目前这台电脑无法科学上网<br>跟着演示找到设置IP的地方<br>将DHCP改成手动<br>添加一个同网段的ip地址<br>网关同样也要设置为<br>192.168.0.140<br>再设置一个公网DNS服务器<br>点击保存<br>重启一下网卡<br>此时就能正常访问谷歌了<br>查询ip地址为香港节点<br>回到clash<br>将节点切换为日本<br>kali的IP也会跟着一起变化<br>先来测个速<br>手机也是同样的设置方式<br>关键就是修改默认网关<br>进入Wifi设置页面<br>修改当前已连接的Wifi<br>将IP设置的DHCP改成静态<br>将网关改成192.168.0.140<br>其他设置按之前的方式填写<br>点击保存<br>重新连接一下Wifi<br>此时就可以正常访问谷歌了<br>查询IP也是日本的节点<br>切换节点后需要先断开连接再查询IP<br>这是第一种设置网关的方式<br>通过手动修改单台设备的网关IP<br>还有一种方式<br>是直接修改路由器的DHCP设置<br>在浏览器中输入路由器的ip地址<br>一般是默认网关的IP<br>找到DHCP设置<br>将DHCP下发的网关设置成电脑的IP<br>再设置一个公网DNS服务器<br>这样家里所有设备无需任何设置<br>通过DHCP直接获取电脑的IP作为网关了<br>如果你家的路由器不支持修改DHCP的网关<br>比如小米的部分路由器<br>只能设置ip地址池 没法设置网关<br>那只能通过手动修改单台设备的网关了<br>或者关闭路由器的DHCP服务<br>把DHCP服务转移到其他设备上<br>这个问题就有点超纲<br>感兴趣的朋友可以自行研究<br>另外再补充一点<br>这种方式只能通过IP进行分流<br>并不完善<br>但好过没有<br>可以点击这里查看路由表<br>包含了所有国内的ip地址<br>在clash的规则模式下<br>路由表中的IP会走直连<br>由于每个人使用的clash分流规则不一样<br>如果规则模式的域名设置为直连<br>而域名的IP又不是国内的IP<br>就会造成路由环路<br>导致clash卡死<br>需要将域名手动添加到额外路由条目<br>比较麻烦<br>所以clash更建议使用全局模式防止路由环路<br>或者使用待会要介绍的v2rayN<br>不会有这种情况<br>此时如果要停用路由转发<br>先将clash的TUN模式关闭<br>将路由动作改成删除路由<br>点击执行<br>其实路由表不删也没有关系<br>这只是临时路由<br>重启后会自动恢复<br>然后将路由转发关闭<br>这样就算是恢复如初了<br>最后再提醒大家<br>路由转发不用了一定要关闭<br>否则会出现问题<br>关闭之后 其他把windows<br>当做网关的设备也就无法上网了<br>需要重新将网关改回路由器的IP<br>用windows当旁路网关我更推荐使用v2rayN<br>v2rayN是通过调用sing-box内核实现TUN模式<br>在v2rayN中<br>TUN模式的默认配置不会导致路由环路<br>使用管理员权限运行v2rayN<br>6.0以上的版本添加了TUN模式<br>先将你使用的节点添加到额外路由中<br>前三个我都已经添加过了<br>只需要将不在列表里的加上即可<br>将动作改成添加路由<br>点击执行即可<br>不要忘了打开路由转发<br>将v2rayN的路由改成全局<br>最后启动TUN模式即可<br>此时就算是配置好了<br>可以正常访问<br>查询IP为香港的节点<br>虽然我们在v2rayN中设置了全局<br>但是我们已经通过IP路由实现了分流<br>其他设置了网关的设备也恢复了联网<br>查询IP同样为香港的节点<br>将节点切换为日本<br>这边也会跟着变<br>再来测个速<br>设置过网关的手机也是同样没有问题的<br>此时如果要停用路由转发<br>先将v2rayN的TUN模式关闭<br>再关闭路由转发<br>然后将路由动作改成删除路由<br>点击执行<br>关闭路由转发和删除路由没有先后顺序<br>这样就算是恢复如初了<br>这就是v2rayN中实现旁路网关的方法<br>虽然我觉得这个小工具很方便<br>让操作步骤少了很多<br>而且还有精美的UI界面<br>但如果你还是觉得麻烦的话<br>还有一个更方便的方法<br>就是利用SSTap<br>SSTap也是一个代理工具<br>虽然已经停止更新了但并不影响使用<br>由于它只支持SS节点<br>所以我们需要额外借助clash或者v2ray<br>开启的socks代理<br>此时路由转发工具不需要进行任何设置<br>只需要开启路由转发即可<br>另外刚才忘记说了<br>这个工具设置完成之后可以随时关闭<br>不需要常驻后台<br>接着点击加号添加节点<br>选择第一项添加socks代理<br>服务器IP填写127.0.0.1<br>端口填写clash<br>开启的监听端口默认是7890<br>随便给个备注 点击保存<br>再来添加v2ray<br>同样服务器IP填写127.0.0.1<br>端口填写v2ray<br>开启的监听端口 默认是10808<br>随便给个备注 点击保存<br>注意clash和v2ray都不需要开启TUN模式<br>可以在这里选择需要使用的节点<br>这里也可以选择IP分流规则<br>比如让国内的IP走直连<br>然后直接点击连接即可<br>不需要配置什么额外路由<br>SSTap会自动帮我们设置好<br>连接之后<br>相当于SSTap使用了clash中的香港节点<br>可以正常访问<br>如果要使用v2ray<br>需要先断开连接<br>将代理改成v2ray重新连接<br>v2ray中选中了日本的节点<br>可以看到没有问题<br>可以随时切换节点<br>刚才我们已经开启了路由转发<br>所以其他设备可以直接<br>科学上网了 非常方便<br>但是也有缺点<br>SSTap不会进行DNS劫持<br>所以你需要填写一个能够正常使用的DNS服务器<br>并且为了防止DNS污染<br>建议填写国外的DNS走代理<br>比如我们刚才填写的1.1.1.1<br>但是这样会造成CDN舍近求远的情况<br>并且SSTap的速度衰减的也比较厉害<br>所以这三种方式的话<br>大家可以按自己的使用需求选择<br>如果想关闭<br>先断开SSTap的连接<br>重新打开工具<br>将路由转发关闭即可</p>
        </div>

        
 
    
    </div> 
    </div>
    <script src="script.js"></script> 
    <footer>
        <a href="https://t.me/g9999_bot/" target="_blank">&copy; 2024 peng gan. All rights reserved.</a>    
    </footer>
</body>
</html>

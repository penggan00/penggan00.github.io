<!DOCTYPE html> 
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>peng gan Blog</title>  
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
<div class="header"> 
            <a href="../../index.html">My Blog</a> 
        </div>
    <div class="container"> 
        
        <div class="subheader"> 
            <h1>     闲置安卓手机当旁路        </h1> <!-- 文章主题 -->
        </div>
        <div class="date" id="lastModified"></div> 
        <div class="content">  <!-- 文章内容 --><p>

    <h2>视频教程</h2> </iframe></div><p>youtube播放地址：<a href="https://bulianglin.com/g/aHR0cHM6Ly95b3V0dS5iZS9vUnlqWDQ0Qnh3NA" target="_blank" >https://youtu.be/oRyjX44Bxw4</a></p><h2>视频相关链接</h2><p>MT管理器：<a href="https://bulianglin.com/g/aHR0cHM6Ly9tdDIuY24" target="_blank" >https://mt2.cn</a><br>box5magisk：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL2J1bGlhbmdsaW4vZGVtbw" target="_blank" >https://github.com/bulianglin/demo</a><br>box4magisk：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL0NISVpJLTA2MTgvYm94NG1hZ2lzaw" target="_blank" >https://github.com/CHIZI-0618/box4magisk</a><br>极客湾root指南：<a href="https://bulianglin.com/g/aHR0cHM6Ly95b3V0dS5iZS93ei1FcmREZjhBTQ" target="_blank" >https://youtu.be/wz-ErdDf8AM</a></p><h2>视频文稿（忽略）</h2><p>本期教大家把闲置的安卓手机<br>打造成一台软路由<br>实现全家科学上网<br>只要你的手机能科学上网<br>你家里的电脑 电视盒子<br>游戏机等网络设备<br>无需运行任何代理工具<br>即可自带科学上网<br>让你的闲置安卓手机<br>在角落里默默的继续发光发热<br>去年我发了一篇<br>手机充当软路由的视频教程<br>本以为这是一个非常小众的需求<br>结果竟意外的出圈了<br>成了我播放量最高的视频<br>看样子大家对这个内容很感兴趣<br>所以本期就来填上期视频结尾挖的坑<br>通过直接调用clash内核<br>实现旁路网关<br>就像你在软路由中使用openclash一样<br>并且对上期的方法进行优化<br>不用再敲命令 实现零配置<br>让这两条出镜率最高的报错信息<br>永远不会再出现<br>并且可以开机自启 使用更方便<br>先来演示一下运行之后的效果<br>有两种模式<br>一种是上期介绍过的第三方VPN客户端模式<br>另一种是调用clash内核模式<br>以下简称客户端模式和内核模式<br>在客户端模式下<br>你可以在手机上运行任何VPN客户端<br>比如clash v2ray AnXray 茉莉 冲浪板等等<br>以clash为例<br>启动VPN服务<br>可以看到右上角的VPN小锁标志<br>先确认手机是否可以正常科学上网<br>可以看到没有问题<br>此时我的电脑没有运行任何代理工具<br>尝试访问谷歌<br>可以正常访问<br>查看一下ip地址<br>是香港的节点<br>此时在手机上切换节点<br>电脑也会跟着一起改变<br>因为电脑用的就是手机<br>共享的网络环境<br>切换到v2rayNG试试 启动服务<br>确保这个日本的节点可以正常使用<br>再来查询电脑IP<br>同样跟着变成了日本<br>你也可以使用某某加速器<br>某某VPN这种自带节点的客户端<br>以快连VPN为例<br>自动连接到了香港的节点<br>回到电脑检测IP<br>可以看到变成了香港的IP<br>这就是客户端模式的效果<br>使用非常方便<br>在某些客户端只有安卓版的情况下<br>用这种方式就能突破这种局限性<br>共享给其他设备使用<br>是这种模式的一大亮点<br>而这种模式最大的缺点是<br>切换节点不方便<br>必须在手机上切换<br>作为一台软路由<br>他应该7x24小时在角落里默默的工作<br>客户端模式不能很好的解决这个问题<br>而在内核模式下<br>通过clash的WEBUI<br>可以轻松实现<br>在局域网其他设备上更换节点<br>当前我已经切换为内核模式<br>右上角没有VPN的标识<br>因为内核模式绕过了安卓系统的VPN服务<br>直接加载了clash的内核<br>此时我的手机已经可以正常科学上网了<br>同样的电脑没有运行任何代理工具<br>访问谷歌也是没有问题的<br>查询一下IP<br>是香港的节点<br>此时如果我想切换节点<br>可以在电脑的浏览器访问clash的WEBUI即可<br>直接在浏览器中更改clash的相关设置<br>比如切换到新加坡<br>查询ip地址没有发生变化<br>是因为连接还没有断开<br>先将连接全部断开<br>此时再来检测就会变成新加坡的IP了<br>再切换到美国<br>同样先断开连接<br>可以看到没有问题<br>这就是内核模式的效果<br>这两种模式都属于透明代理<br>和局域网共享的socks系统代理<br>有本质的区别<br>具体可以回看我的这两期视频<br>有详细的解释<br>在一些无法设置代理的设备上<br>透明代理的方法是必备的<br>这也是为什么很多人需要软路由的原因<br>对比软路由的openWRT上手门槛<br>用安卓手机当软路由<br>相当于直接把门给拆了<br>不过虽然从硬件的角度来看<br>手机性能肯定要比软路由强悍<br>但手机的主要使用场景并不是做路由转发<br>可能为了省电会做相应的限制<br>所以手机也不一定比普通的软路由表现更好<br>教程的目的在于让大家有更多的选择<br>接下来正式开始教程<br>首先第一步将手机root<br>第二步刷入Magisk<br>俗称面具<br>现在的手机要root比较麻烦<br>需要解BL锁<br>每个手机品牌方法都有差异<br>推荐大家先看一下极客湾的root入坑视频<br>学习一些相关概念<br>这是最难的一步<br>root之后刷入面具就比较简单了<br>虽然不用面具也可以<br>但是不同的系统环境有差异<br>会导致不一样的执行结果<br>所以还是建议直接使用面具<br>统一系统环境<br>就不会出现莫名其妙的问题了<br>root和刷入面具只有靠你自己解决了<br>没有统一的解决方法<br>毕竟每个人的设备都不一样<br>只要你能解决这两步后面就非常简单了<br>用到的工具有MT管理器和box5magisk的面具模块<br>下载地址我会放在视频下方的说明栏<br>box5的原版是box4magisk<br>box4是一款支持使用v2ray clash<br>sing-box内核实现透明代理的面具模块<br>使用前需要进行一些配置<br>小白用户上手比较困难<br>所以我将clash.meta内核<br>以及相关设置整合到了box4中<br>安装后就能直接使用了<br>为了和box4共存<br>我把名字改成了box5<br>如果你已经安装了box4<br>安装box5不会覆盖你原本的box4<br>但是两个模块不能同时启用<br>会有冲突<br>如果你想使用v2ray或者sing-box的内核<br>请自行根据github上box4的教程进行配置<br>地址我会放在视频下方<br>先将box5传到手机里<br>你可以使用任何方式<br>我这里通过adb push指令<br>将box5推送到手机里<br>随便找个位置<br>假设推送到/data/adb这个文件夹<br>接着打开面具<br>进入模块页面<br>选择从本地安装<br>找到我们刚才传过来的box5<br>在/data/adb目录下<br>选中之后就会开始安装<br>稍等片刻<br>显示Done说明安装完成了<br>点击右下角的按钮重启手机<br>重启之后<br>此时的手机就已经<br>成为了一台旁路网关了<br>没错就是这么简单<br>先来运行clash<br>可以正常访问google<br>接着我们在局域网的另一台设备上<br>访问google<br>可以看到无法访问<br>因为我们还没有将这台电脑的默认网关<br>改成安卓手机的ip地址<br>根据视频演示<br>找到修改网卡ip地址的地方<br>选择手动配置IP<br>打开MT管理器<br>进入终端模拟器<br>输入ip a 回车<br>可以看到wlan0是手机的Wifi网卡接口<br>ip地址是192.168.0.108<br>我们需要给电脑手动设置一个在同网段的IP<br>比如192.168.0.133<br>子网掩码按默认填写255.255.255.0<br>默认网关填写手机Wifi网口的ip地址<br>192.168.0.108<br>由于不同客户端对DNS的处理方式不一样<br>比如clash会进行DNS劫持<br>填写不存在的DNS服务器都不影响<br>但其他客户端可能不会劫持<br>所以建议填写1111和8888这种国外DNS<br>一般都会通过分流走代理<br>可以一定程度上防止DNS污染<br>关于DNS的话题<br>可以回看我这三期视频<br>设置完成之后点击确定<br>此时电脑访问互联网的请求<br>就会交给安卓手机了<br>这是第一种设置网关的方式<br>通过手动修改单台设备的网关<br>还有一种方式是直接在路由器中<br>将DHCP下发的网关设置成手机的IP<br>这样家里的所有网络设备无需任何设置<br>可以直接获取手机的IP作为网关了<br>上次的教程中有详细的演示<br>想了解的可以回看<br>这里就不浪费大家的时间了<br>再来尝试访问google<br>可以看到没有问题<br>查询IP为台湾的节点<br>在手机上切换为香港的节点<br>再次查询就会变成香港IP了<br>尝试进行测速<br>我家的宽带是100M<br>目前手机是通过Wifi连接到局域网的<br>只跑到了30M<br>由于我家的上古配置<br>这个结果也在意料之中<br>如果你家的Wifi质量不错<br>直接用Wifi就可以了<br>如果你想更快速稳定<br>建议和我一样<br>购买一条type-c转网卡的转换器<br>通过网线将手机接入主路由<br>这样速度会非常稳定和快速<br>并且为了让其7x24小时在线<br>最好是买带PD充电口的<br>我已经将手机通过网线<br>连接到了路由器<br>可以看到右上角没有了Wifi的标志<br>转而变成了网线连接的标识<br>要注意Wifi和网线不是同一个网卡<br>所以ip地址也不同<br>再次使用ip a指令查看网络接口<br>这个eth0就是我的网线接口<br>ip地址为192.168.0.111<br>关于ip地址再补充一点<br>最好是将其设置为静态IP<br>防止每次连接后ip地址都会发生变化<br>导致电脑的网关地址不正确<br>将会无法正常上网<br>Wifi可以在网络设置中将其改为静态IP<br>网线在手机上不好设置<br>可以直接在路由器中<br>将ip地址和麦克地址进行绑定<br>这样路由器每次都会给手机分配同一个ip地址<br>当网络接口名称发生变化之后<br>我们需要修改模块的配置<br>先进入面具模块将box5的服务停止<br>这一步很关键<br>改动任何配置之前都需要先关闭服务<br>否则会出现不可预料的问题<br>关闭之后跟着视频演示找到box.config的配置文件<br>打开进行修改<br>将这里的接口名称<br>从默认的Wifi接口名称wlan0<br>改成网线接口的名称eth0<br>点击保存<br>这样就算是修改好了<br>非常简单<br>回到面具中重新启动模块<br>重新尝试测速<br>可以看到无法访问<br>因为Wifi和网线接口的ip地址不一样<br>需要重新设置一下<br>网关地址改成网线的111<br>此时就通了<br>重新测速<br>看过上期教程的朋友<br>应该知道我的家庭状况<br>这个是我的满速状态<br>远没有达到手机的性能瓶颈<br>这就是客户端模式<br>在Wifi下和网线下的配置方式<br>客户端模式是我添加的功能<br>接下来演示box4原版的内核模式<br>修改配置之前需要先关闭模块功能<br>打开配置文件<br>将代理的方式从APP改成TPROXY<br>在这里填入你的订阅地址<br>如果你是自建节点没有订阅地址<br>就在这里填入你的URI链接<br>比如这种格式<br>直接全部复制粘贴到两个单引号中间<br>也支持这种纯base64编码格式的节点链接<br>订阅地址支持v2ray和clash的格式<br>v2ray类似这种格式<br>clash类似这种格式<br>使用订阅地址替换掉原来的内容即可<br>要注意的是 订阅地址和节点分享链接不能同时使用<br>设置了订阅地址就不要设置节点链接<br>反之亦然<br>也不能添加多个订阅<br>我的配置只能尽量符合大多数人的使用习惯<br>不能满足所有人<br>如果你觉得这样不方便<br>可以研究一下原版的使用方法<br>填入订阅地址后点击保存<br>重新启动模块<br>此时就已经启用内核模式了<br>要注意的是<br>使用内核模式<br>需要先关闭安卓的VPN服务<br>可以看到右上角没有VPN的标志<br>但我们的手机已经可以科学上网了<br>前提是你刚才添加的订阅地址存在有效的节点<br>手机上可以正常访问google<br>电脑也没有问题<br>查看IP为台湾节点<br>此时如果想更换节点<br>直接在浏览器中输入手机的ip地址<br>加上英文的冒号<br>再加上端口和ui路径 9090/ui回车<br>这是错误示范<br>注意要使用小写 回车<br>之后即可进入WEBUI<br>复制地址和端口<br>粘贴到这里<br>结尾的斜杠要删掉<br>点击添加<br>点击地址进行访问<br>此时就进入了WEBUI的控制台了<br>可以先进入config页面<br>将语言切换为中文<br>这样我们就可以直接在浏览器中<br>更换节点了<br>这些就是我们刚才配置的<br>订阅地址里的节点<br>刚才我们检查的IP是台湾的节点<br>切换到香港<br>先把之前的连接断开<br>刷新页面<br>可以看到变成了香港的IP<br>再来切换试试<br>可以看到没有问题<br>这就是内核模式的使用方式<br>如果此时想回到客户端模式<br>先将模块停止<br>重新编辑配置文件<br>将代理模式改成APP即可<br>保存后重新启动模块<br>这样就又恢复成客户端模式了<br>启动任意客户端的VPN服务<br>目前选中了阿根廷的节点<br>尝试查询IP<br>就变成了阿根廷的节点了<br>同样的想切回内核模式<br>也先关闭模块服务<br>编辑配置文件<br>将代理模式改成TPROXY即可<br>另外我给大家的clash模板<br>类似v2rayN的绕过大陆模式<br>如果觉得这个分流规则不好用<br>可以跟着视频演示<br>打开这个clash的模板文件<br>将最底下的分流规则改成你习惯的即可<br>比如v2rayN的黑名单模式<br>这些分流规则<br>我在DNS的教程中都已经详细介绍过了<br>修改完成后点击保存<br>最后重启模块<br>可以正常访问<br>电脑也是没有任何问题的<br>目前我们是通过透明代理的方式访问<br>如果你不喜欢TPROXY的透明代理<br>也可以使用系统的socks代理<br>在配置页面可以看到<br>clash开启的系统代理端口是7890<br>将电脑的IP恢复成自动获取<br>使用浏览器插件<br>将代理配置成手机的IP和代理端口7890<br>将浏览器的代理<br>切换为刚才设置的代理<br>尝试进行测速<br>可以在这边看到<br>电脑的连接类型为socks5<br>最后再补充一点<br>如果想要7x24小时在线<br>那就必须长期充电<br>这样对电池的寿命影响比较大<br>还有可能出现电池鼓包的情况<br>所以可以刷入这个ACC面具模块<br>这个模块的主要作用就是控制充电<br>安装之后默认充电到75%就停止充电<br>当电量低于70%的时候<br>又会自动开始充电<br>强烈建议安装</p>          </div>
                          
        
 
    
    </div> <!-- 文章内容 -->    
    </div>
    <script src="script.js"></script> <!-- 引用外部JavaScript文件 -->
    <footer>
        <a href="https://t.me/g9999_bot/" target="_blank">&copy; 2024 peng gan. All rights reserved.</a>    
    </footer>
</body>
</html>
